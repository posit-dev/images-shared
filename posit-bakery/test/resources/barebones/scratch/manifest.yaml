#######################################################################################################################
# BAKERY MANIFEST
#
# This file is used to define nested image builds inside a repo managed by Posit's Bakery tool.
# This file is autogenerated by Bakery. Utilize the Bakery CLI when possible to make changes to this file.
#######################################################################################################################

image_name: "scratch"

# Define any variables used by subsequent targets and builds.
const: {}

# # Define the matrix of builds to be run. This should include all currently supported versions of the image.
# # Builds can be automatically generated by the Bakery CLI using `bakery render`.
# build:
#  "<version>":
#     latest: true  # Defaults to False if not specified.
build:
  "1.0.0":
    os:
      - "scratch"

# # Define the targets for each build. Each target should be a unique image build contained within each version.
target:
  min: {}
  #   containerfile: "Containerfile.min"  # Defaults to Containerfile.<type> if not specified.
  #   tags: ["{{ os | lower }}{{ build.version | condense }}-min"]  # Default tags for all builds.
  #   latest_tags: ["{{ os | lower }}-min", "latest-min"]  # Default tags for latest build.
  # # (Optional) define alternative settings for Goss tests for this target.
  #   goss:
  #     deps: "{{ build.version }}/deps"  # Defaults to assumed deps path if not specified.
  #     path: "{{ build.version }}/test"  # Defaults to assumed test path if not specified.
  #     wait: 0  # Defaults to 0 if not specified.
  #     command: "sleep infinity"  # Defaults to sleep infinity to run if not specified.

  std: {}
  #   containerfile: "Containerfile.std"  # Defaults to Containerfile.<type> if not specified.

  #   tags: ["{{ os | lower }}{{ build.version | condense }}"]  # Default tags for all builds.
  #   latest_tags: ["{{ os | lower }}", "latest"]  # Default tags for latest build.

  # # (Optional) define alternative settings for Goss tests for this target.
  #   goss:
  #     deps: "{{ build.version }}/deps"  # Defaults to assumed deps path if not specified.
  #     path: "{{ build.version }}/test"  # Defaults to assumed test path if not specified.
  #     wait: 0  # Defaults to 0 if not specified.
  #     command: "sleep infinity"  # Defaults to sleep infinity to run if not specified.

# # (Optional) define alternative settings for Snyk scans for this manifest.
# snyk:
#   test:
#     severity_threshold: "medium"  # Defaults to "medium" if not specified.
#     include_app_vulns: true  # Defaults to true if not specified.
#     include_base_image_vulns: false  # Defaults to false if not specified.
#     output:
#       format: "default"  # Can be "snyk", "json", or "default". Defaults to "default" if not specified.
#       json_file: false  # Defaults to false if not specified.
#       sarif_file: false  # Defaults to false if not specified.
#   monitor:
#     include_app_vulns: true  # Defaults to true if not specified.
#     output_json: false  # Defaults to false if not specified.
#     environment: ["distributed"]  # Defaults to None if not specified. See Snyk documentation for values.
#     lifecycle: ["production"]  # Defaults to None if not specified. See Snyk documentation for values.
#     business_criticality: ["medium"]  # Defaults to None if not specified. See Snyk documentation for values.
#     tags: []  # Key-value pairs can be added here. Defaults shown below:
# # Tags below will be automatically added unless overridden.
#       image_name: "{{ image_name }}"
#       image_tag: "{{ os.distributor_id | lower }}{{ build.version | condense }}"
#       os_distro: "{{ os.distributor_id | lower }}"
#       os_version: "{{ os.version }}"
#       version: "{{ build.version }}"
#       image_type: "{{ target.name }}"
#   sbom:
#     include_app_vulns: true  # Defaults to true if not specified.
#     format: "cyclonedx1.5+json"  # Defaults to "cyclonedx1.5+json" if not specified. See Snyk documentation for values.
