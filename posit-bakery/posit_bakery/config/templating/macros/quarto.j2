{% macro get_version_directory(version) -%}
/opt/quarto/{{ version }}
{%- endmacro %}

{% macro install(version, with_tinytex = False) -%}
RUN mkdir -p {{ get_version_directory(version) }} && \
    curl -fsSL "https://github.com/quarto-dev/quarto-cli/releases/download/v{{ version }}/quarto-{{ version }}-linux-amd64.tar.gz" | tar xzf - -C "{{ get_version_directory(version) }}" --strip-components=1{% if with_tinytex %} && \
    /opt/quarto/{{ version }}/bin/quarto install tinytex{% endif %}
{%- endmacro %}
