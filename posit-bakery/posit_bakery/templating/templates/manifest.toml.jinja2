#######################################################################################################################
# BAKERY MANIFEST
#
# This file is used to define nested image builds inside a repo managed by Posit's Bakery tool.
# It is written in TOML format. For more information on TOML, see https://toml.io/en/.
# This file is autogenerated by Bakery. Utilize the Bakery CLI when possible to make changes to this file.
#######################################################################################################################

image_name = "{{ image_name }}"

# Define any variables used by subsequent targets and builds.
[const]

# Define the matrix of builds to be run. This should include all currently supported versions of the image.
# Builds can be automatically generated by the Bakery CLI using `bakery render`.
# [build."<VERSION>"]
# latest = true  # Defaults to False if not specified.

# Define the targets for each build. Each target should be a unique image build contained within each version.
[target.min]
# containerfile = "Containerfile.min"  # Defaults to Containerfile.<type> if not specified.
{% raw %}
# tags = ["{{ os | lower }}{{ build.version | condense }}-min"]  # Default tags for all builds.
# latest_tags = ["{{ os | lower }}-min", "latest-min"]  # Default tags for latest build.
{% endraw %}
# (Optional) define alternative settings for Goss tests for this target.
# [target.min.goss]
{% raw %}
# deps = "{{ build.version }}/deps"  # Defaults to assumed deps path if not specified.
# path = "{{ build.version }}/test"  # Defaults to assumed test path if not specified.
{% endraw %}
# wait = 0  # Defaults to 0 if not specified.
# command = "sleep infinity"  # Defaults to sleep infinity to run if not specified.

[target.std]
# containerfile = "Containerfile.std"  # Defaults to Containerfile.<type> if not specified.
{% raw %}
# tags = ["{{ os | lower }}{{ build.version | condense }}"]  # Default tags for all builds.
# latest_tags = ["{{ os | lower }}", "latest"]  # Default tags for latest build.
{% endraw %}
# (Optional) define alternative settings for Goss tests for this target.
# [target.std.goss]
{% raw %}
# deps = "{{ build.version }}/deps"  # Defaults to assumed deps path if not specified.
# path = "{{ build.version }}/test"  # Defaults to assumed test path if not specified.
{% endraw %}
# wait = 0  # Defaults to 0 if not specified.
# command = "sleep infinity"  # Defaults to sleep infinity to run if not specified.

# # (Optional) define alternative settings for Snyk scans for this manifest.
# [snyk]
# [snyk.test]
# severity_threshold = "medium"  # Defaults to "medium" if not specified.
# include_app_vulns = true  # Defaults to true if not specified.
# include_base_image_vulns = false  # Defaults to false if not specified.
# [snyk.test.output]
# json = false  # Defaults to false if not specified. Cannot be true if sarif is true.
# json_file = false  # Defaults to false if not specified.
# sarif = false  # Defaults to false if not specified. Cannot be true if json is true.
# sarif_file = false  # Defaults to false if not specified.
# [snyk.monitor]
# include_app_vulns = true  # Defaults to true if not specified.
# output_json = false  # Defaults to false if not specified.
# environment = "distributed"  # Defaults to None if not specified. See Snyk documentation for values.
# lifecycle = "production"  # Defaults to None if not specified. See Snyk documentation for values.
# business_criticality = "medium"  # Defaults to None if not specified. See Snyk documentation for values.
# [snyk.monitor.tags]
# # Tags below will be automatically added unless overridden.
# image_name = "{{ image_name }}"
# image_tag = "{{ os.distributor_id | lower }}{{ build.version | condense }}"
# os_distro = "{{ os.distributor_id | lower }}"
# os_version = "{{ os.version }}"
# version = "{{ build.version }}"
# image_type = "{{ target.name }}"
# [snyk.sbom]
# include_app_vulns = true  # Defaults to true if not specified.
# format = "cyclonedx1.5+json"  # Defaults to "cyclonedx1.5+json" if not specified. See Snyk documentation for values.
