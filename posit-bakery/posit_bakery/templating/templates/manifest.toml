#######################################################################################################################
# BAKERY MANIFEST
#
# This file is used to define nested image builds inside a repo managed by Posit's Bakery tool.
# It is written in TOML format. For more information on TOML, see https://toml.io/en/.
# This file is autogenerated by Bakery. Utilize the Bakery CLI when possible to make changes to this file.
#######################################################################################################################

# Define any variables used by subsequent targets and builds.
[const]
image_name = "{{ image_name }}"

# Define the matrix of builds to be run. This should include all currently supported versions of the image.
[[build]]
version = "{{ version }}"
os = ["Ubuntu 22.04"]
targets = ["min", "std"]  # Defaults to all targets if not specified.
latest = true  # Defaults to False if not specified.

# Define the targets for each build. Each target should be a unique image build contained within each version.
[[target]]
type = "min"
containerfile = "Containerfile.min"
tags = ["{{ build.version | safe }}-min", "{{ build.version | clean }}-min"]
[[target.goss]]
{% raw %}
deps = "{{ build.version }}/deps"  # Defaults to assumed deps path if not specified.
path = "{{ build.version }}/test"  # Defaults to assumed test path if not specified.
{% endraw %}
wait = 0  # Defaults to 0 if not specified.
command = "sleep infinity"  # Defaults to sleep infinity to run if not specified.

[[target]]
type = "std"
containerfile = "Containerfile.std"
tags = ["{{ build.version | safe }}", "{{ build.version | clean }}"]
[[target.goss]]
{% raw %}
deps = "{{ build.version }}/deps"  # Defaults to assumed deps path if not specified.
path = "{{ build.version }}/test"  # Defaults to assumed test path if not specified.
{% endraw %}
wait = 0  # Defaults to 0 if not specified.
command = "sleep infinity"  # Defaults to sleep infinity to run if not specified.
